# Job 2.1: Implement Simple Logger

## Objective

Implement a simple, development-friendly logger with color-coded messages and emoji indicators.

## Problem Analysis

Need a simple logger that outputs clean, readable messages for development debugging with:

- Color-coded severity levels
- Emoji indicators for quick visual identification
- Simple timestamp format
- Optional metadata support

## Solution

### Format Specification

**Format**: `*[date]:message*`

**Color Scheme**:

- ðŸ”´ **ERROR**: Red color
- ðŸŸ¡ **INFO**: Yellow color
- ðŸ”µ **DEBUG**: Blue color
- ðŸŸ¢ **SUCCESS**: Green color
- âšª **WARN**: White color

### Implementation

**File**: `src/common/utils/simple-logger.ts`

```typescript
import chalk from 'chalk';

export interface SimpleLogger {
  error(message: string, meta?: any): void;
  info(message: string, meta?: any): void;
  debug(message: string, meta?: any): void;
  success(message: string, meta?: any): void;
  warn(message: string, meta?: any): void;
}

export class SimpleLoggerImpl implements SimpleLogger {
  private formatMessage(level: string, message: string, meta?: any): string {
    const timestamp = new Date().toISOString();
    const emoji = this.getEmoji(level);
    const color = this.getColor(level);

    let formattedMessage = `${emoji}[${timestamp}]:${message}`;

    if (meta) {
      formattedMessage += ` ${JSON.stringify(meta)}`;
    }

    return color(formattedMessage);
  }

  private getEmoji(level: string): string {
    switch (level.toLowerCase()) {
      case 'error':
        return 'ðŸ”´';
      case 'info':
        return 'ðŸŸ¡';
      case 'debug':
        return 'ðŸ”µ';
      case 'success':
        return 'ðŸŸ¢';
      case 'warn':
        return 'âšª';
      default:
        return 'âšª';
    }
  }

  private getColor(level: string): (text: string) => string {
    switch (level.toLowerCase()) {
      case 'error':
        return chalk.red;
      case 'info':
        return chalk.yellow;
      case 'debug':
        return chalk.blue;
      case 'success':
        return chalk.green;
      case 'warn':
        return chalk.white;
      default:
        return chalk.white;
    }
  }

  error(message: string, meta?: any): void {
    console.log(this.formatMessage('error', message, meta));
  }

  info(message: string, meta?: any): void {
    console.log(this.formatMessage('info', message, meta));
  }

  debug(message: string, meta?: any): void {
    console.log(this.formatMessage('debug', message, meta));
  }

  success(message: string, meta?: any): void {
    console.log(this.formatMessage('success', message, meta));
  }

  warn(message: string, meta?: any): void {
    console.log(this.formatMessage('warn', message, meta));
  }
}
```

## Implementation Steps

### Step 1: Install Dependencies

```bash
npm install chalk
npm install --save-dev @types/chalk
```

### Step 2: Create Simple Logger File

1. Create `src/common/utils/simple-logger.ts`
2. Implement `SimpleLogger` interface
3. Implement `SimpleLoggerImpl` class
4. Add color and emoji helper methods

### Step 3: Testing

1. Create unit tests for all log levels
2. Test color output
3. Test emoji display
4. Test metadata handling

## Success Criteria

- [ ] Simple logger outputs clean, color-coded messages
- [ ] All log levels display correct emojis
- [ ] All log levels display correct colors
- [ ] Timestamp format is correct
- [ ] Metadata is properly formatted
- [ ] No performance impact
- [ ] Unit tests pass

## Example Output

```
ðŸ”´[2025-08-10T10:17:12.123Z]:Failed to create web crawl task
ðŸŸ¡[2025-08-10T10:17:12.124Z]:Processing new task message
ðŸ”µ[2025-08-10T10:17:12.125Z]:Executing create_web_crawl_task procedure
ðŸŸ¢[2025-08-10T10:17:12.126Z]:Task created successfully
âšª[2025-08-10T10:17:12.127Z]:Task processing warning
```

## Testing

### Unit Tests

```typescript
describe('SimpleLoggerImpl', () => {
  let logger: SimpleLoggerImpl;

  beforeEach(() => {
    logger = new SimpleLoggerImpl();
  });

  it('should format error messages correctly', () => {
    const consoleSpy = jest.spyOn(console, 'log').mockImplementation();

    logger.error('Test error');

    expect(consoleSpy).toHaveBeenCalledWith(expect.stringMatching(/ðŸ”´\[.*\]:Test error/));

    consoleSpy.mockRestore();
  });

  it('should include metadata when provided', () => {
    const consoleSpy = jest.spyOn(console, 'log').mockImplementation();

    logger.info('Test info', { userId: '123', action: 'create' });

    expect(consoleSpy).toHaveBeenCalledWith(expect.stringMatching(/ðŸŸ¡\[.*\]:Test info {"userId":"123","action":"create"}/));

    consoleSpy.mockRestore();
  });
});
```

## Dependencies

- `chalk` package for color output
- `@types/chalk` for TypeScript support

## Risks and Mitigation

### Risks

1. **Color Support**: Terminal might not support colors
2. **Performance**: String formatting might be slow
3. **Unicode Support**: Emojis might not display correctly

### Mitigation

1. **Color Detection**: Use chalk's built-in color detection
2. **Performance**: Keep formatting simple and efficient
3. **Fallback**: Provide fallback characters for unsupported terminals
