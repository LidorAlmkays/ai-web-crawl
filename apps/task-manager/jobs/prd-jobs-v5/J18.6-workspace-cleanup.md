# Job 18.6: Workspace Cleanup and Organization

## Objective

Clean up the workspace by moving Grafana to the deployment/observability directory and organizing DevOps services (Kafka, Redis, PostgreSQL) into a proper deployment structure.

## Requirements

### Grafana Cleanup

- [ ] Move `grafana/` directory from root to `deployment/observability/grafana/`
- [ ] Update any references to Grafana configuration
- [ ] Ensure Grafana provisioning still works correctly

### DevOps Services Organization

- [ ] Create `deployment/devops/` directory
- [ ] Move `docker-compose.yml` to `deployment/devops/docker-compose.yml`
- [ ] Rename services appropriately (e.g., `devops-kafka`, `devops-redis`, `devops-postgres`)
- [ ] Update any references to these services
- [ ] Ensure all services still work correctly

### Configuration Files Cleanup

- [ ] Move `loki-config.yaml` to `deployment/observability/configs/`
- [ ] Move `prometheus.yml` to `deployment/observability/configs/`
- [ ] Move `otel-collector-config.yaml` to `deployment/observability/configs/`
- [ ] Update any references to these files

### Documentation Updates

- [ ] Update README.md with new directory structure
- [ ] Update any documentation references
- [ ] Ensure deployment instructions are clear

## Test Criteria

### ✅ Grafana Migration

- [ ] Grafana starts correctly from new location
- [ ] Dashboards are still accessible
- [ ] Data sources are still configured
- [ ] No broken references

### ✅ DevOps Services

- [ ] All services start correctly from new location
- [ ] Kafka is accessible on port 9092
- [ ] Redis is accessible on port 6379
- [ ] PostgreSQL is accessible on port 5432
- [ ] Kafka UI is accessible on port 8080

### ✅ Configuration Files

- [ ] All config files are in correct locations
- [ ] No broken file references
- [ ] Services can find their configurations

### ✅ Integration

- [ ] Task-manager can connect to all services
- [ ] Observability stack works correctly
- [ ] No broken dependencies

## Implementation Details

### Files to Move

- `grafana/` → `deployment/observability/grafana/`
- `docker-compose.yml` → `deployment/devops/docker-compose.yml`
- `loki-config.yaml` → `deployment/observability/configs/loki-config.yaml`
- `prometheus.yml` → `deployment/observability/configs/prometheus.yml`
- `otel-collector-config.yaml` → `deployment/observability/configs/otel-collector-config.yaml`

### Directory Structure After Cleanup

```
deployment/
├── observability/
│   ├── configs/
│   │   ├── grafana/
│   │   ├── loki-config.yaml
│   │   ├── prometheus.yml
│   │   └── otel-collector-config.yaml
│   ├── grafana/
│   └── docker-compose.yml
└── devops/
    └── docker-compose.yml
```

## Status: ✅ COMPLETED

### Test Results

- ✅ Grafana moved to deployment/observability/grafana/
- ✅ DevOps services moved to deployment/devops/
- ✅ Configuration files moved to deployment/observability/configs/
- ✅ OTEL Collector configured to scrape task-manager metrics
- ✅ Prometheus successfully pulling metrics from OTEL Collector
- ✅ All services working correctly from new locations

### Verification

- ✅ DevOps services (Kafka, Redis, PostgreSQL) running from deployment/devops/
- ✅ Observability stack (Prometheus, Grafana, OTEL Collector) running from deployment/observability/
- ✅ OTEL Collector scraping task-manager metrics on port 3000
- ✅ Prometheus collecting metrics from OTEL Collector on port 9464
- ✅ task_manager_up metric showing successful scraping

## Next Steps

After cleanup is complete, proceed to **Job 18.7: OTEL Collector Integration Testing**
